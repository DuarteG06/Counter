(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[974],{5646:(e,t,s)=>{Promise.resolve().then(s.bind(s,6855))},6855:(e,t,s)=>{"use strict";s.r(t),s.d(t,{default:()=>K});var r=s(5155),a=s(2115),l=s(5647),n=s(9708),i=s(2085),o=s(2596),c=s(9688);function d(){for(var e=arguments.length,t=Array(e),s=0;s<e;s++)t[s]=arguments[s];return(0,c.QP)((0,o.$)(t))}let m=(0,i.F)("inline-flex items-center justify-center gap-2 whitespace-nowrap rounded-md text-sm font-medium ring-offset-background transition-colors focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:pointer-events-none disabled:opacity-50 [&_svg]:pointer-events-none [&_svg]:size-4 [&_svg]:shrink-0",{variants:{variant:{default:"bg-primary text-primary-foreground hover:bg-primary/90",destructive:"bg-destructive text-destructive-foreground hover:bg-destructive/90",outline:"border border-input bg-background hover:bg-accent hover:text-accent-foreground",secondary:"bg-secondary text-secondary-foreground hover:bg-secondary/80",ghost:"hover:bg-accent hover:text-accent-foreground",link:"text-primary underline-offset-4 hover:underline"},size:{default:"h-10 px-4 py-2",sm:"h-9 rounded-md px-3",lg:"h-11 rounded-md px-8",icon:"h-10 w-10"}},defaultVariants:{variant:"default",size:"default"}}),u=a.forwardRef((e,t)=>{let{className:s,variant:a,size:l,asChild:i=!1,...o}=e,c=i?n.DX:"button";return(0,r.jsx)(c,{className:d(m({variant:a,size:l,className:s})),ref:t,...o})});u.displayName="Button";let x=a.forwardRef((e,t)=>{let{className:s,type:a,...l}=e;return(0,r.jsx)("input",{type:a,className:d("flex h-10 w-full rounded-md border border-input bg-background px-3 py-2 text-base ring-offset-background file:border-0 file:bg-transparent file:text-sm file:font-medium file:text-foreground placeholder:text-muted-foreground focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50 md:text-sm",s),ref:t,...l})});x.displayName="Input";let h=a.forwardRef((e,t)=>{let{className:s,...a}=e;return(0,r.jsx)("div",{ref:t,className:d("rounded-lg border bg-card text-card-foreground shadow-sm",s),...a})});h.displayName="Card";let f=a.forwardRef((e,t)=>{let{className:s,...a}=e;return(0,r.jsx)("div",{ref:t,className:d("flex flex-col space-y-1.5 p-6",s),...a})});f.displayName="CardHeader";let p=a.forwardRef((e,t)=>{let{className:s,...a}=e;return(0,r.jsx)("div",{ref:t,className:d("text-2xl font-semibold leading-none tracking-tight",s),...a})});p.displayName="CardTitle",a.forwardRef((e,t)=>{let{className:s,...a}=e;return(0,r.jsx)("div",{ref:t,className:d("text-sm text-muted-foreground",s),...a})}).displayName="CardDescription";let g=a.forwardRef((e,t)=>{let{className:s,...a}=e;return(0,r.jsx)("div",{ref:t,className:d("p-6 pt-0",s),...a})});g.displayName="CardContent",a.forwardRef((e,t)=>{let{className:s,...a}=e;return(0,r.jsx)("div",{ref:t,className:d("flex items-center p-6 pt-0",s),...a})}).displayName="CardFooter";let j=(0,i.F)("inline-flex items-center rounded-full border px-2.5 py-0.5 text-xs font-semibold transition-colors focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2",{variants:{variant:{default:"border-transparent bg-primary text-primary-foreground hover:bg-primary/80",secondary:"border-transparent bg-secondary text-secondary-foreground hover:bg-secondary/80",destructive:"border-transparent bg-destructive text-destructive-foreground hover:bg-destructive/80",outline:"text-foreground"}},defaultVariants:{variant:"default"}});function b(e){let{className:t,variant:s,...a}=e;return(0,r.jsx)("div",{className:d(j({variant:s}),t),...a})}var v=s(5863);let N=a.forwardRef((e,t)=>{let{className:s,value:a,...l}=e;return(0,r.jsx)(v.bL,{ref:t,className:d("relative h-4 w-full overflow-hidden rounded-full bg-secondary",s),...l,children:(0,r.jsx)(v.C1,{className:"h-full w-full flex-1 bg-primary transition-all",style:{transform:"translateX(-".concat(100-(a||0),"%)")}})})});N.displayName=v.bL.displayName;var y=s(2919),w=s(8186),C=s(7951),k=s(5595),A=s(4616),P=s(1007),S=s(9869),D=s(6287),E=s(2525),F=s(7712),z=s(1189),R=s(4416);let _=z.bL,U=z.l9,L=z.ZL;z.bm;let T=a.forwardRef((e,t)=>{let{className:s,...a}=e;return(0,r.jsx)(z.hJ,{ref:t,className:d("fixed inset-0 z-50 bg-black/80  data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0",s),...a})});T.displayName=z.hJ.displayName;let I=a.forwardRef((e,t)=>{let{className:s,children:a,...l}=e;return(0,r.jsxs)(L,{children:[(0,r.jsx)(T,{}),(0,r.jsxs)(z.UC,{ref:t,className:d("fixed left-[50%] top-[50%] z-50 grid w-full max-w-lg translate-x-[-50%] translate-y-[-50%] gap-4 border bg-background p-6 shadow-lg duration-200 data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[state=closed]:slide-out-to-left-1/2 data-[state=closed]:slide-out-to-top-[48%] data-[state=open]:slide-in-from-left-1/2 data-[state=open]:slide-in-from-top-[48%] sm:rounded-lg",s),...l,children:[a,(0,r.jsxs)(z.bm,{className:"absolute right-4 top-4 rounded-sm opacity-70 ring-offset-background transition-opacity hover:opacity-100 focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2 disabled:pointer-events-none data-[state=open]:bg-accent data-[state=open]:text-muted-foreground",children:[(0,r.jsx)(R.A,{className:"h-4 w-4"}),(0,r.jsx)("span",{className:"sr-only",children:"Close"})]})]})]})});I.displayName=z.UC.displayName;let O=e=>{let{className:t,...s}=e;return(0,r.jsx)("div",{className:d("flex flex-col space-y-1.5 text-center sm:text-left",t),...s})};O.displayName="DialogHeader";let B=a.forwardRef((e,t)=>{let{className:s,...a}=e;return(0,r.jsx)(z.hE,{ref:t,className:d("text-lg font-semibold leading-none tracking-tight",s),...a})});B.displayName=z.hE.displayName,a.forwardRef((e,t)=>{let{className:s,...a}=e;return(0,r.jsx)(z.VY,{ref:t,className:d("text-sm text-muted-foreground",s),...a})}).displayName=z.VY.displayName;var J=s(968);let M=(0,i.F)("text-sm font-medium leading-none peer-disabled:cursor-not-allowed peer-disabled:opacity-70"),V=a.forwardRef((e,t)=>{let{className:s,...a}=e;return(0,r.jsx)(J.b,{ref:t,className:d(M(),s),...a})});V.displayName=J.b.displayName;var Y=s(9509);let X=Y.env.NEXT_PUBLIC_SUPABASE_URL,q=Y.env.NEXT_PUBLIC_SUPABASE_ANON_KEY;X&&q||console.warn("⛔️ Supabase env vars missing – realtime sync disabled.");let H=X&&q?(0,l.UU)(X,q):null;function K(){let[e,t]=(0,a.useState)(()=>"true"===localStorage.getItem("isAuthenticated")),[s,l]=(0,a.useState)(""),[n,i]=(0,a.useState)(!e),o=()=>{"skibidi"===s.trim().toLowerCase()?(t(!0),localStorage.setItem("isAuthenticated","true"),i(!1)):alert("Wrong password – try again.")},c=(0,a.useRef)(null),d=(0,a.useRef)(null),m=(0,a.useRef)(Math.random().toString(36).slice(2)),[j,v]=(0,a.useState)([]);(0,a.useEffect)(()=>{(async()=>{if(H){let{data:e}=await H.from("counter_state").select("data").eq("id",1).single();if(null==e?void 0:e.data){v(e.data);return}}let e=localStorage.getItem("universalCounters");if(e){v(JSON.parse(e));return}v([{id:"1",name:"Peter",phrase:"Tenho fome / N\xe3o vais comer isso?",count:0,color:"#4CAF50"},{id:"2",name:"Torta",phrase:"Esqueci-me",count:0,color:"#dcbc19"}])})()},[]),(0,a.useEffect)(()=>(c.current=new BroadcastChannel("universal-counter-sync"),c.current.onmessage=e=>{let{sender:t,counters:s}=e.data||{};t!==m.current&&Array.isArray(s)&&v(s)},()=>{var e;return null===(e=c.current)||void 0===e?void 0:e.close()}),[]),(0,a.useEffect)(()=>{if(H)return(async()=>{let{data:e,error:t}=await H.from("counter_state").select("*").order("id",{ascending:!0});t?console.error("Failed to fetch counters:",t):Array.isArray(e)&&v(e)})(),d.current=H.channel("universal-counter-sync"),d.current.on("broadcast",{event:"SYNC_STATE"},e=>{(null==e?void 0:e.sender)!==m.current&&Array.isArray(null==e?void 0:e.counters)&&v(e.counters)}).subscribe(),()=>{var e;return null===(e=d.current)||void 0===e?void 0:e.unsubscribe()}},[]);let z=async e=>{var t,s;if(localStorage.setItem("universalCounters",JSON.stringify(e)),null===(t=c.current)||void 0===t||t.postMessage({sender:m.current,counters:e}),null===(s=d.current)||void 0===s||s.send({type:"broadcast",event:"SYNC_STATE",payload:{sender:m.current,counters:e}}),!H)return;let{error:r}=await H.from("counter_state").upsert(e,{onConflict:"id"});r&&console.error("Upsert failed:",r)};(0,a.useEffect)(()=>{j.length&&z(j)},[j]);let R=t=>function(){for(var s=arguments.length,r=Array(s),a=0;a<s;a++)r[a]=arguments[a];if(!e){i(!0);return}t(...r)},L=R(e=>{v(t=>t.map(t=>t.id===e?{...t,count:t.count+1}:t))}),T=R(e=>{v(t=>t.map(t=>t.id===e?{...t,count:Math.max(0,t.count-1)}:t))}),J=R(e=>{v(t=>t.filter(t=>t.id!==e))}),[M,Y]=(0,a.useState)({name:"",phrase:"",color:"#4CAF50",profilePicture:""}),[X,q]=(0,a.useState)(null),[K,W]=(0,a.useState)(!1),[G,Q]=(0,a.useState)(!1),Z=(0,a.useRef)(null),$=(0,a.useRef)(null);(0,a.useEffect)(()=>{let e=localStorage.getItem("universalCounters");e&&v(JSON.parse(e))},[]),(0,a.useEffect)(()=>{localStorage.setItem("universalCounters",JSON.stringify(j))},[j]);let ee=function(e){var t;let s=arguments.length>1&&void 0!==arguments[1]&&arguments[1],r=null===(t=e.target.files)||void 0===t?void 0:t[0];if(r&&r.type.startsWith("image/")){let e=new FileReader;e.onload=e=>{var t;let r=null===(t=e.target)||void 0===t?void 0:t.result;s&&X?q(e=>e?{...e,profilePicture:r}:null):Y(e=>({...e,profilePicture:r}))},e.readAsDataURL(r)}},et=function(){let e=arguments.length>0&&void 0!==arguments[0]&&arguments[0];e&&X?q(e=>e?{...e,profilePicture:""}:null):Y(e=>({...e,profilePicture:""}))},es=e=>{q({...e}),Q(!0)},er=()=>j.reduce((e,t)=>{let s=e.find(e=>e.name.toLowerCase()===t.name.toLowerCase());return s?(s.totalCount+=t.count,s.phrases.includes(t.phrase)||s.phrases.push(t.phrase),!s.profilePicture&&t.profilePicture&&(s.profilePicture=t.profilePicture)):e.push({name:t.name,totalCount:t.count,color:t.color,phrases:[t.phrase],profilePicture:t.profilePicture}),e},[]).sort((e,t)=>t.totalCount-e.totalCount),ea=er(),el=(()=>{let e=er(),t=[],s=1;for(let r=0;r<e.length;r++)r>0&&e[r].totalCount<e[r-1].totalCount&&(s=r+1),t.push({...e[r],rank:s});return t})(),en=Math.max(...ea.map(e=>e.totalCount),1),ei=["#4CAF50","#2196F3","#FF9800","#E91E63","#9C27B0","#00BCD4","#FF5722","#795548"],eo=(()=>{let e=el.filter(e=>e.rank<=3&&e.totalCount>0);return{first:e.filter(e=>1===e.rank),second:e.filter(e=>2===e.rank),third:e.filter(e=>3===e.rank)}})(),ec=e=>{let{src:t,name:s,color:a,size:l="w-12 h-12",textSize:n="text-sm"}=e;return t?(0,r.jsx)("img",{src:t||"/placeholder.svg",alt:"".concat(s,"'s profile"),className:"".concat(l," rounded-full object-cover border-2 border-white shadow-lg")}):(0,r.jsx)("div",{className:"".concat(l," rounded-full flex items-center justify-center text-white font-bold ").concat(n," border-2 border-white shadow-lg"),style:{backgroundColor:a},children:s.slice(0,2).toUpperCase()})};return(0,r.jsxs)("div",{className:"min-h-screen bg-gradient-to-br from-blue-50 to-indigo-100 p-4",children:[(0,r.jsx)(_,{open:n,onOpenChange:()=>{},children:(0,r.jsxs)(I,{className:"max-w-sm",children:[(0,r.jsx)(O,{children:(0,r.jsxs)(B,{className:"flex items-center gap-2",children:[(0,r.jsx)(y.A,{className:"w-4 h-4"})," Enter secret word"]})}),(0,r.jsxs)("div",{className:"space-y-4",children:[(0,r.jsx)(x,{autoFocus:!0,type:"password",value:s,placeholder:"password",onChange:e=>l(e.target.value),onKeyDown:e=>"Enter"===e.key&&o()}),(0,r.jsx)(u,{className:"w-full",onClick:o,children:"Unlock"})]})]})}),(0,r.jsxs)("div",{className:"max-w-4xl mx-auto",children:[(0,r.jsxs)("header",{className:"text-center mb-8",children:[(0,r.jsx)("h1",{className:"text-4xl font-bold text-gray-800 mb-2",children:"Universal Counter & Leaderboard"}),(0,r.jsx)("p",{className:"text-lg text-gray-600",children:"Track anything, compete with anyone!"}),(0,r.jsx)("p",{className:"text-sm text-gray-500 mt-2",children:"\uD83D\uDCA1 Tip: Counters with the same name are combined in the leaderboard"})]}),j.length>0&&(0,r.jsx)(h,{className:"mb-8 bg-gradient-to-r from-yellow-50 to-amber-50 border-yellow-200",children:(0,r.jsx)(g,{className:"pt-6",children:(()=>{let e=Math.max(...ea.map(e=>e.totalCount)),t=ea.filter(t=>t.totalCount===e&&t.totalCount>0);if(0===e)return(0,r.jsxs)("div",{className:"text-center",children:[(0,r.jsx)(w.A,{className:"w-8 h-8 mx-auto mb-2 text-gray-400"}),(0,r.jsx)("p",{className:"text-lg font-semibold text-gray-600",children:"No one is winning yet!"}),(0,r.jsx)("p",{className:"text-sm text-gray-500",children:"Start counting to see who takes the lead"})]});if(1===t.length){let e=t[0];return(0,r.jsxs)("div",{className:"text-center",children:[(0,r.jsx)("div",{className:"flex justify-center mb-3",children:(0,r.jsx)(ec,{src:e.profilePicture,name:e.name,color:e.color,size:"w-16 h-16",textSize:"text-lg"})}),(0,r.jsx)(w.A,{className:"w-8 h-8 mx-auto mb-2 text-yellow-500"}),(0,r.jsxs)("p",{className:"text-2xl font-bold mb-1",style:{color:e.color},children:["\uD83C\uDF89 ",e.name," is winning! \uD83C\uDF89"]}),(0,r.jsxs)("p",{className:"text-lg text-gray-600",children:["with"," ",(0,r.jsx)("span",{className:"font-bold",children:e.totalCount})," ","total counts"]}),(0,r.jsx)("div",{className:"text-sm text-gray-500 italic mt-1",children:1===e.phrases.length?'"'.concat(e.phrases[0],'"'):(0,r.jsxs)("div",{children:[(0,r.jsx)("p",{children:"Multiple phrases tracked:"}),(0,r.jsx)("ul",{className:"list-none mt-1",children:e.phrases.map((e,t)=>(0,r.jsxs)("li",{children:['"',e,'"']},t))})]})})]})}return(0,r.jsxs)("div",{className:"text-center",children:[(0,r.jsx)("div",{className:"flex justify-center gap-2 mb-3",children:t.slice(0,3).map(e=>(0,r.jsx)(ec,{src:e.profilePicture,name:e.name,color:e.color,size:"w-12 h-12"},e.name))}),(0,r.jsx)(w.A,{className:"w-8 h-8 mx-auto mb-2 text-yellow-500"}),(0,r.jsx)("p",{className:"text-xl font-bold text-gray-700 mb-1",children:"\uD83E\uDD1D It's a tie! \uD83E\uDD1D"}),(0,r.jsxs)("p",{className:"text-lg text-gray-600 mb-2",children:[t.map(e=>e.name).join(", ")," are tied with"," ",(0,r.jsx)("span",{className:"font-bold",children:e})," counts each"]}),(0,r.jsx)("div",{className:"flex flex-wrap justify-center gap-2",children:t.map(e=>(0,r.jsx)(b,{style:{backgroundColor:e.color},className:"text-white",children:e.name},e.name))})]})})()})}),(eo.first.length>0||eo.second.length>0||eo.third.length>0)&&(0,r.jsxs)(h,{className:"mb-8 bg-gradient-to-r from-purple-50 to-pink-50 border-purple-200",children:[(0,r.jsx)(f,{children:(0,r.jsxs)(p,{className:"flex items-center gap-2 justify-center",children:[(0,r.jsx)(C.A,{className:"w-5 h-5 text-purple-600"}),"Champions Podium"]})}),(0,r.jsx)(g,{children:(0,r.jsxs)("div",{className:"flex items-end justify-center gap-4 mb-4",children:[eo.second.length>0&&(0,r.jsxs)("div",{className:"flex flex-col items-center",children:[(0,r.jsx)("div",{className:"mb-2",children:eo.second.map((e,t)=>(0,r.jsxs)("div",{className:"text-center mb-1",children:[(0,r.jsx)(ec,{src:e.profilePicture,name:e.name,color:e.color,size:"w-12 h-12"}),(0,r.jsx)("p",{className:"text-xs font-medium mt-1",children:e.name}),(0,r.jsx)("p",{className:"text-xs text-gray-600",children:e.totalCount})]},t))}),(0,r.jsx)("div",{className:"w-20 h-16 bg-gradient-to-t from-gray-400 to-gray-300 rounded-t-lg flex items-center justify-center",children:(0,r.jsx)(k.A,{className:"w-6 h-6 text-gray-600"})}),(0,r.jsx)("div",{className:"bg-gray-300 text-gray-700 px-3 py-1 rounded-b text-sm font-bold",children:"2nd"})]}),eo.first.length>0&&(0,r.jsxs)("div",{className:"flex flex-col items-center",children:[(0,r.jsx)("div",{className:"mb-2",children:eo.first.map((e,t)=>(0,r.jsxs)("div",{className:"text-center mb-1",children:[(0,r.jsx)(ec,{src:e.profilePicture,name:e.name,color:e.color,size:"w-14 h-14"}),(0,r.jsx)("p",{className:"text-sm font-bold mt-1",children:e.name}),(0,r.jsx)("p",{className:"text-sm text-gray-600",children:e.totalCount})]},t))}),(0,r.jsx)("div",{className:"w-24 h-20 bg-gradient-to-t from-yellow-500 to-yellow-400 rounded-t-lg flex items-center justify-center",children:(0,r.jsx)(C.A,{className:"w-8 h-8 text-yellow-800"})}),(0,r.jsx)("div",{className:"bg-yellow-400 text-yellow-800 px-4 py-1 rounded-b text-sm font-bold",children:"1st"})]}),eo.third.length>0&&(0,r.jsxs)("div",{className:"flex flex-col items-center",children:[(0,r.jsx)("div",{className:"mb-2",children:eo.third.map((e,t)=>(0,r.jsxs)("div",{className:"text-center mb-1",children:[(0,r.jsx)(ec,{src:e.profilePicture,name:e.name,color:e.color,size:"w-10 h-10",textSize:"text-xs"}),(0,r.jsx)("p",{className:"text-xs font-medium mt-1",children:e.name}),(0,r.jsx)("p",{className:"text-xs text-gray-600",children:e.totalCount})]},t))}),(0,r.jsx)("div",{className:"w-16 h-12 bg-gradient-to-t from-amber-600 to-amber-500 rounded-t-lg flex items-center justify-center",children:(0,r.jsx)(k.A,{className:"w-5 h-5 text-amber-800"})}),(0,r.jsx)("div",{className:"bg-amber-500 text-amber-800 px-2 py-1 rounded-b text-xs font-bold",children:"3rd"})]})]})})]}),(0,r.jsxs)("div",{className:"flex justify-center gap-4 mb-8",children:[(0,r.jsxs)(_,{open:K,onOpenChange:W,children:[(0,r.jsx)(U,{asChild:!0,children:(0,r.jsxs)(u,{className:"bg-green-600 hover:bg-green-700",children:[(0,r.jsx)(A.A,{className:"w-4 h-4 mr-2"}),"Add New Counter"]})}),(0,r.jsxs)(I,{className:"max-w-md",children:[(0,r.jsx)(O,{children:(0,r.jsx)(B,{children:"Add New Counter"})}),(0,r.jsxs)("div",{className:"space-y-4",children:[(0,r.jsxs)("div",{children:[(0,r.jsx)(V,{htmlFor:"name",children:"Name/Category"}),(0,r.jsx)(x,{id:"name",placeholder:"e.g., John, Coffee Breaks, Goals...",value:M.name,onChange:e=>Y(t=>({...t,name:e.target.value}))}),(0,r.jsx)("p",{className:"text-xs text-gray-500 mt-1",children:"\uD83D\uDCA1 Use the same name to combine with existing counters in the leaderboard"})]}),(0,r.jsxs)("div",{children:[(0,r.jsx)(V,{htmlFor:"phrase",children:"Phrase/Action to Track"}),(0,r.jsx)(x,{id:"phrase",placeholder:"e.g., Says 'Actually...', Drinks coffee, Scores goal...",value:M.phrase,onChange:e=>Y(t=>({...t,phrase:e.target.value}))})]}),(0,r.jsxs)("div",{children:[(0,r.jsx)(V,{htmlFor:"color",children:"Color"}),(0,r.jsx)("div",{className:"flex gap-2 mt-2",children:ei.map(e=>(0,r.jsx)("button",{className:"w-8 h-8 rounded-full border-2 ".concat(M.color===e?"border-gray-800":"border-gray-300"),style:{backgroundColor:e},onClick:()=>Y(t=>({...t,color:e})),"aria-label":"Select color ".concat(e)},e))})]}),(0,r.jsxs)("div",{children:[(0,r.jsx)(V,{htmlFor:"profile-picture",children:"Profile Picture (Optional)"}),(0,r.jsxs)("div",{className:"mt-2",children:[M.profilePicture?(0,r.jsxs)("div",{className:"flex items-center gap-3",children:[(0,r.jsx)("img",{src:M.profilePicture||"/placeholder.svg",alt:"Profile preview",className:"w-12 h-12 rounded-full object-cover border-2 border-gray-200"}),(0,r.jsx)(u,{type:"button",variant:"outline",size:"sm",onClick:()=>et(!1),children:"Remove"})]}):(0,r.jsxs)("div",{className:"flex items-center gap-3",children:[(0,r.jsx)("div",{className:"w-12 h-12 rounded-full flex items-center justify-center border-2 border-dashed border-gray-300",style:{backgroundColor:M.color+"20"},children:(0,r.jsx)(P.A,{className:"w-6 h-6 text-gray-400"})}),(0,r.jsxs)(u,{type:"button",variant:"outline",size:"sm",onClick:()=>{var e;return null===(e=Z.current)||void 0===e?void 0:e.click()},children:[(0,r.jsx)(S.A,{className:"w-4 h-4 mr-2"}),"Upload Image"]})]}),(0,r.jsx)("input",{ref:Z,type:"file",accept:"image/*",onChange:e=>ee(e,!1),className:"hidden"})]})]}),(0,r.jsx)(u,{onClick:()=>{if(M.name.trim()&&M.phrase.trim()){let e={id:Date.now().toString(),name:M.name.trim(),phrase:M.phrase.trim(),count:0,color:M.color,profilePicture:M.profilePicture||void 0};v(t=>[...t,e]),Y({name:"",phrase:"",color:"#4CAF50",profilePicture:""}),W(!1),Z.current&&(Z.current.value="")}},className:"w-full",children:"Add Counter"})]})]})]}),(0,r.jsx)(u,{variant:"outline",onClick:()=>{v(e=>e.map(e=>({...e,count:0})))},className:"border-red-300 text-red-600 hover:bg-red-50 bg-transparent",children:"Reset All"})]}),(0,r.jsx)("div",{className:"grid gap-6 md:grid-cols-2 lg:grid-cols-3 mb-8",children:j.map(e=>{let t=j.filter(t=>t.name.toLowerCase()===e.name.toLowerCase()),s=t.reduce((e,t)=>e+t.count,0);return(0,r.jsxs)(h,{className:"relative",children:[(0,r.jsxs)(f,{className:"pb-3",children:[(0,r.jsxs)("div",{className:"flex items-center justify-between",children:[(0,r.jsxs)("div",{className:"flex items-center gap-3",children:[(0,r.jsx)(ec,{src:e.profilePicture,name:e.name,color:e.color,size:"w-10 h-10",textSize:"text-xs"}),(0,r.jsxs)("div",{children:[(0,r.jsx)(p,{className:"text-lg",children:e.name}),t.length>1&&(0,r.jsxs)("p",{className:"text-xs text-gray-500",children:["Combined total: ",s]})]})]}),(0,r.jsxs)("div",{className:"flex gap-1",children:[(0,r.jsx)(u,{variant:"ghost",size:"sm",onClick:()=>es(e),"aria-label":"Edit ".concat(e.name),children:(0,r.jsx)(D.A,{className:"w-4 h-4"})}),(0,r.jsx)(u,{variant:"ghost",size:"sm",onClick:()=>J(e.id),className:"text-red-600 hover:text-red-700","aria-label":"Delete ".concat(e.name),children:(0,r.jsx)(E.A,{className:"w-4 h-4"})})]})]}),(0,r.jsxs)("p",{className:"text-sm text-gray-600 italic ml-13",children:['"',e.phrase,'"']})]}),(0,r.jsx)(g,{children:(0,r.jsxs)("div",{className:"flex items-center justify-between mb-4",children:[(0,r.jsx)(u,{onClick:()=>T(e.id),variant:"outline",size:"sm",disabled:0===e.count,"aria-label":"Decrease ".concat(e.name," counter"),children:(0,r.jsx)(F.A,{className:"w-4 h-4"})}),(0,r.jsxs)("div",{className:"text-center",children:[(0,r.jsx)("div",{className:"text-3xl font-bold",style:{color:e.color},children:e.count}),(0,r.jsx)("div",{className:"text-sm text-gray-500",children:"count"})]}),(0,r.jsx)(u,{onClick:()=>L(e.id),size:"sm",style:{backgroundColor:e.color},className:"text-white hover:opacity-90","aria-label":"Increase ".concat(e.name," counter"),children:(0,r.jsx)(A.A,{className:"w-4 h-4"})})]})})]},e.id)})}),j.length>0&&(0,r.jsxs)(h,{children:[(0,r.jsx)(f,{children:(0,r.jsxs)(p,{className:"flex items-center gap-2",children:[(0,r.jsx)(w.A,{className:"w-5 h-5 text-yellow-500"}),"Full Leaderboard (Combined Totals)"]})}),(0,r.jsx)(g,{children:(0,r.jsx)("div",{className:"space-y-4",children:el.map(e=>(0,r.jsxs)("div",{className:"space-y-2",children:[(0,r.jsxs)("div",{className:"flex items-center justify-between",children:[(0,r.jsxs)("div",{className:"flex items-center gap-3",children:[(0,r.jsxs)(b,{variant:1===e.rank?"default":"secondary",className:1===e.rank?"bg-yellow-500 hover:bg-yellow-600":2===e.rank?"bg-gray-400 hover:bg-gray-500":3===e.rank?"bg-amber-600 hover:bg-amber-700":"",children:["#",e.rank]}),(0,r.jsx)(ec,{src:e.profilePicture,name:e.name,color:e.color,size:"w-8 h-8",textSize:"text-xs"}),(0,r.jsxs)("div",{children:[(0,r.jsx)("span",{className:"font-medium",children:e.name}),e.phrases.length>1&&(0,r.jsxs)("p",{className:"text-xs text-gray-500",children:[e.phrases.length," different phrases tracked"]})]})]}),(0,r.jsx)("span",{className:"font-bold text-lg",children:e.totalCount})]}),(0,r.jsxs)("div",{className:"relative ml-14",children:[(0,r.jsx)(N,{value:e.totalCount/en*100,className:"h-4"}),(0,r.jsx)("div",{className:"absolute top-0 left-0 h-4 rounded-full transition-all duration-500 ease-in-out",style:{width:"".concat(e.totalCount/en*100,"%"),backgroundColor:e.color}})]}),e.phrases.length>1&&(0,r.jsx)("div",{className:"text-xs text-gray-500 ml-14",children:(0,r.jsxs)("details",{children:[(0,r.jsxs)("summary",{className:"cursor-pointer hover:text-gray-700",children:["View all phrases (",e.phrases.length,")"]}),(0,r.jsx)("ul",{className:"mt-1 ml-2 list-disc",children:e.phrases.map((e,t)=>(0,r.jsxs)("li",{children:['"',e,'"']},t))})]})})]},e.name))})})]}),(0,r.jsx)(_,{open:G,onOpenChange:Q,children:(0,r.jsxs)(I,{className:"max-w-md",children:[(0,r.jsx)(O,{children:(0,r.jsx)(B,{children:"Edit Counter"})}),X&&(0,r.jsxs)("div",{className:"space-y-4",children:[(0,r.jsxs)("div",{children:[(0,r.jsx)(V,{htmlFor:"edit-name",children:"Name/Category"}),(0,r.jsx)(x,{id:"edit-name",value:X.name,onChange:e=>q(t=>t?{...t,name:e.target.value}:null)}),(0,r.jsx)("p",{className:"text-xs text-gray-500 mt-1",children:"\uD83D\uDCA1 Changing the name will affect leaderboard grouping"})]}),(0,r.jsxs)("div",{children:[(0,r.jsx)(V,{htmlFor:"edit-phrase",children:"Phrase/Action to Track"}),(0,r.jsx)(x,{id:"edit-phrase",value:X.phrase,onChange:e=>q(t=>t?{...t,phrase:e.target.value}:null)})]}),(0,r.jsxs)("div",{children:[(0,r.jsx)(V,{htmlFor:"edit-color",children:"Color"}),(0,r.jsx)("div",{className:"flex gap-2 mt-2",children:ei.map(e=>(0,r.jsx)("button",{className:"w-8 h-8 rounded-full border-2 ".concat(X.color===e?"border-gray-800":"border-gray-300"),style:{backgroundColor:e},onClick:()=>q(t=>t?{...t,color:e}:null),"aria-label":"Select color ".concat(e)},e))})]}),(0,r.jsxs)("div",{children:[(0,r.jsx)(V,{htmlFor:"edit-profile-picture",children:"Profile Picture (Optional)"}),(0,r.jsxs)("div",{className:"mt-2",children:[X.profilePicture?(0,r.jsxs)("div",{className:"flex items-center gap-3",children:[(0,r.jsx)("img",{src:X.profilePicture||"/placeholder.svg",alt:"Profile preview",className:"w-12 h-12 rounded-full object-cover border-2 border-gray-200"}),(0,r.jsx)(u,{type:"button",variant:"outline",size:"sm",onClick:()=>et(!0),children:"Remove"})]}):(0,r.jsxs)("div",{className:"flex items-center gap-3",children:[(0,r.jsx)("div",{className:"w-12 h-12 rounded-full flex items-center justify-center border-2 border-dashed border-gray-300",style:{backgroundColor:X.color+"20"},children:(0,r.jsx)(P.A,{className:"w-6 h-6 text-gray-400"})}),(0,r.jsxs)(u,{type:"button",variant:"outline",size:"sm",onClick:()=>{var e;return null===(e=$.current)||void 0===e?void 0:e.click()},children:[(0,r.jsx)(S.A,{className:"w-4 h-4 mr-2"}),"Upload Image"]})]}),(0,r.jsx)("input",{ref:$,type:"file",accept:"image/*",onChange:e=>ee(e,!0),className:"hidden"})]})]}),(0,r.jsx)(u,{onClick:()=>{X&&X.name.trim()&&X.phrase.trim()&&(v(e=>e.map(e=>e.id===X.id?X:e)),q(null),Q(!1),$.current&&($.current.value=""))},className:"w-full",children:"Save Changes"})]})]})}),0===j.length&&(0,r.jsx)(h,{className:"text-center py-12",children:(0,r.jsx)(g,{children:(0,r.jsxs)("div",{className:"text-gray-500 mb-4",children:[(0,r.jsx)(w.A,{className:"w-16 h-16 mx-auto mb-4 opacity-50"}),(0,r.jsx)("h3",{className:"text-xl font-semibold mb-2",children:"No counters yet!"}),(0,r.jsx)("p",{children:"Add your first counter to start tracking."})]})})})]})]})}}},e=>{var t=t=>e(e.s=t);e.O(0,[702,441,684,358],()=>t(5646)),_N_E=e.O()}]);